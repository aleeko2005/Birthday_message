<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tap Letter</title>
<style>
  :root{
    --bg:#f2e9e4;
    --env:#d04967;
    --env-dark:#b03653;
    --paper:#fffdf7;
    --shadow: rgba(0,0,0,0.18);
    font-family: "Inter", system-ui;
  }

  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg), #fff);display:flex;align-items:center;justify-content:center;}
  .stage{width:100%;display:flex;align-items:center;justify-content:center;padding:24px;}

  .envelope-wrap{
    --w:480px;
    width:var(--w);
    max-width:95%;
    perspective:1200px;
    position:relative;
  }

  .envelope{
    width:100%;
    height:310px;
    background: linear-gradient(180deg,var(--env), var(--env-dark));
    border-radius:14px;
    position:relative;
    box-shadow: 0 20px 40px var(--shadow);
    transform-origin: top center;
    transition: transform 600ms cubic-bezier(.2,.9,.25,1);
    cursor: pointer;
    user-select:none;
  }

  .flap{
    position:absolute;
    top:-82px;
    left:0;right:0;
    margin:auto;
    width:0;height:0;
    border-left: calc(var(--w)/2) solid transparent;
    border-right: calc(var(--w)/2) solid transparent;
    border-bottom: 110px solid var(--env);
    transform-origin: center bottom;
    transition: transform 600ms cubic-bezier(.2,.9,.25,1);
    filter: drop-shadow(0 8px 14px rgba(0,0,0,0.12));
  }

  .seal{
    position:absolute;
    top:55px;left:50%;transform:translateX(-50%);
    width:86px;height:86px;
    border-radius:50%;
    background: radial-gradient(circle at 30% 30%, #ffd1d8, #e65163 60%);
    box-shadow:0 8px 16px rgba(0,0,0,0.12);
    display:flex;align-items:center;justify-content:center;
    color:white;font-weight:700;font-size:28px;
  }

  .letter{
    position:absolute;
    width:94%;
    left:50%; transform:translateX(-50%);
    top:35px;
    height:320px;
    background:var(--paper);
    border-radius:10px;
    box-shadow:0 18px 38px rgba(0,0,0,0.12);
    padding:40px 35px;
    box-sizing:border-box;
    display:flex;
    justify-content:center;
    align-items:center;
    text-align:center;
    transition: transform 720ms cubic-bezier(.2,.9,.25,1), opacity 260ms;
    transform-origin: top center;
    transform: translate(-50%, 25px) scale(.985);
    opacity:0;
    z-index:0;
  }

  .letter .content{
    max-width:90%;
    color:#333;
    line-height:1.6;
    font-size:1.25rem;
  }

  .open .flap{transform: rotateX(-180deg) translateY(8px);}  
  .open .envelope{transform: translateY(22px) rotateX(8deg);}  
  .open .letter{transform: translate(-50%, -260px) scale(1);opacity:1;z-index:20;}  

  .close-btn{
    position:absolute;
    right:15px;top:12px;
    background:transparent;border:none;
    font-size:26px;color:#777;
    padding:8px;cursor:pointer;display:none;
  }
  .open .close-btn{display:block;}

  .hint{text-align:center;margin-top:20px;color:#666;font-size:15px;}

</style>
</head>
<body>
  <main class="stage">
    <div class="envelope-wrap" id="envWrap">

      <div class="envelope" id="envelope" role="button" tabindex="0">
        <div class="flap"></div>
        <div class="seal">‚ù§</div>

        <div class="letter" id="letter">
          <button class="close-btn" id="closeBtn">&times;</button>
          <div class="content" id="letterContent">
            <h2 style="margin-top:0;color:#d81b60;">Tugan kuninizben, Anashym!</h2>
            <p>Sizge qyzyqqa, baqytqa jane jaqsylyqqa toly omir tileimin! Aman-esen aramyzda otyra beruinizdi Allahym nasip etsin.</p>
          </div>
        </div>
      </div>

      <p class="hint">Tap the envelope to open</p>
    </div>
  </main>

<script>
(function(){
  const envWrap = document.getElementById('envWrap');
  const envelope = document.getElementById('envelope');
  const letter = document.getElementById('letter');
  const closeBtn = document.getElementById('closeBtn');
  let isOpen = false;

  function setOpen(open){
    isOpen = !!open;
    if(isOpen){envWrap.classList.add('open');}
    else{envWrap.classList.remove('open');}
  }

  envelope.addEventListener('click', e => {if(e.target!==closeBtn) setOpen(!isOpen);});
  closeBtn.addEventListener('click', () => setOpen(false));
})();
</script>
</body>
</html>
